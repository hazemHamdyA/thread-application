import{u as S,j as C,l as x,o as n,c,h as t,F,r as N,d as a,w as k,n as r,t as l,a as P,e as L,p as D,f as M,q as U,s as j,v as E,i as I,k as g,x as z,y as G}from"./index-600bec0e.js";import{_ as H}from"./AppDate-cb14dc0d.js";const J={key:0,class:"col-full"},K={class:"thread-list"},O=t("h2",{class:"list-title"},"Threads",-1),Q={class:"text-faded text-xsmall"},W={class:"activity"},X={class:"replies-count"},Y={class:"text-xsmall"},Z={class:"text-xsmall text-faded"},ee={__name:"ThreadList",props:{threads:{required:!0}},setup(d){const $=S(),m=C($.items),o=function(_){return m.find(i=>i.id===_)??{}};return(_,i)=>{const p=x("router-link"),h=H,v=D,f=x("RouterLink");return d.threads?(n(),c("div",J,[t("div",K,[O,(n(!0),c(F,null,N(d.threads,e=>(n(),c("div",{class:"thread",key:e.id},[t("div",null,[t("p",null,[a(p,{to:{name:"thread",params:{id:e.id}}},{default:k(()=>[r(l(e.title),1)]),_:2},1032,["to"])]),t("p",Q,[r(" By "),e.id?(n(),P(p,{key:0,to:{name:"thread",params:{id:e.id}}},{default:k(()=>[r(l(o(e.userId).name),1)]),_:2},1032,["to"])):L("",!0),r(", "),a(h,{"time-change":e.publishedAt},null,8,["time-change"])])]),t("div",W,[t("p",X,l(e.replaiesCount)+" replaies",1),a(v,{class:"avatar-medium",src:o(e.userId).avatar,alt:"person"},null,8,["src"]),t("div",null,[t("p",Y,[a(f,{to:{name:"profile"}},{default:k(()=>[r(l(o(e.userId).name),1)]),_:2},1024)]),t("p",Z,[a(h,{"time-change":e.publishedAt},null,8,["time-change"])])])])]))),128))])])):L("",!0)}}},te={key:0,class:"col-full push-top"},se={class:"forum-header"},ae={class:"forum-details"},oe={class:"text-lead"},ne={key:0},re={key:1,style:{padding:"2rem","font-weight":"bolder"}},le=t("em",null,"there are not any threads yet ",-1),ce=[le],de={__name:"FourmShow",props:["id"],emits:["ready"],setup(d,{emit:$}){const m=M(),o=U(),_=S(),i=j(),p=E(),h=$,v=d,f=I(!1),e=I(i.query.page?+i.query.page:1),R=I(10),u=g(()=>m.items.find(s=>s.id===v.id)),V=g(()=>o.items.filter(s=>s.forumId===u.value.id).map(s=>o.thread(s.id))??[]),w=g(()=>{var s;return(s=u.value.threads)==null?void 0:s.length}),T=g(()=>w.value?Math.ceil(w.value/R.value):0);return z(async()=>{const s=await m.featchFourm(v.id),y=await o.feathThreadsByPage(s.threads,e.value,R.value);await _.featchUsers(y.map(B=>B.userId)),f.value=!0,h("ready")}),G(e,async()=>{p.push({query:{page:e.value}})}),(s,y)=>{const B=x("RouterLink"),b=ee,q=x("v-pagination");return f.value?(n(),c("div",te,[t("div",se,[t("div",ae,[t("h1",null,l(u.value.name),1),t("p",oe,l(u.value.description),1)]),a(B,{to:{name:"createThread",params:{forumId:u.value.id}},class:"btn-green btn-small"},{default:k(()=>[r("Start a thread")]),_:1},8,["to"])]),a(b,{threads:V.value},null,8,["threads"]),w.value?(n(),c("div",ne,[a(q,{modelValue:e.value,"onUpdate:modelValue":y[0]||(y[0]=A=>e.value=A),pages:T.value,"active-color":"#57ad8d"},null,8,["modelValue","pages"])])):(n(),c("div",re,ce))])):L("",!0)}}};export{de as default};
